{% extends "home.html" %}
{% load static %}

{% block main_content %}
<link rel="stylesheet" href="{% static 'css/all_members.css' %}">
<link rel="stylesheet" href="{% static 'css/member_detail.css' %}">
<section class="members-section">
    <h2>All Members</h2>

    <div class="filter-panel">
        <div class="filter-form">
            <div class="filter-row">
                <div class="filter-group">
                    <label for="companyFilter">Company</label>
                    <select id="companyFilter">
                        <option value="">All Companies</option>
                        {% for company in companies %}
                            <option value="{{ company }}">{{ company }}</option>
                        {% endfor %}
                    </select>
                </div>

                <div class="filter-group">
                    <label for="instructorFilter">Instructor</label>
                    <select id="instructorFilter">
                        <option value="">All Instructors</option>
                        {% for instructor in instructors %}
                            <option value="{{ instructor.id }}">{{ instructor.name }}</option>
                        {% endfor %}
                    </select>
                </div>

                <div class="filter-group">
                    <label for="dateFilter">Initiation Date</label>
                    <input type="date" id="dateFilter">
                </div>

                <div class="filter-group">
                    <label for="searchInput">Search</label>
                    <input type="text" id="searchInput" placeholder="Name or number...">
                </div>
            </div>

            <div class="filter-actions">
                <button id="downloadExcel" class="filter-btn download-btn">
                    <i class="fas fa-download"></i> Download Excel
                </button>
                <div class="right-actions">
                    <button id="applyFilter" class="filter-btn apply-btn">
                        <i class="fas fa-filter"></i> Apply Filters
                    </button>
                    <button id="resetFilter" class="filter-btn reset-btn">
                        <i class="fas fa-undo"></i> Reset
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="table-container">
        <table id="membersTable">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Number</th>
                    <th>Email</th>
                    <th>Age</th>
                    <th>Gender</th>
                    <th>Company</th>
                    <th>Instructor</th>
                    <th>Date of Initiation</th>
                    <th>Address</th>
                    <th>Country</th>
                    <th>State</th>
                    <th>City</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% if members %}
                    {% for member in members %}
                        <tr>
                            <td>{{ member.name|default:"N/A" }}</td>
                            <td>{{ member.number|default:"N/A" }}</td>
                            <td>{{ member.email|default:"N/A" }}</td>
                            <td>{{ member.age|default:"N/A" }}</td>
                            <td>{{ member.gender|default:"N/A" }}</td>
                            <td>{{ member.company|default:"N/A" }}</td>
                            <td>{{ member.instructor_name|default:"N/A" }}</td>
                            <td>{{ member.date_of_initiation|default:"N/A" }}</td>
                            <td>{{ member.address|default:"N/A" }}</td>
                            <td>{{ member.country|default:"N/A" }}</td>
                            <td>{{ member.state|default:"N/A" }}</td>
                            <td>{{ member.district|default:"N/A" }}</td>

                            <td class="actions-cell">
                                <button class="action-btn view-btn" data-id="{{ member.id }}">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button class="action-btn edit-btn" data-id="{{ member.id }}">
                                    <i class="fas fa-edit"></i>
                                </button>

                            </td>
                        </tr>
                    {% endfor %}
                {% else %}
                    <tr>
                        <td colspan="7" class="text-center">No members found</td>
                    </tr>
                {% endif %}
            </tbody>
        </table>
    </div>
    <div id="pagination" class="pagination-bar"></div>
</section>

<script src="{% static 'js/all_members.js' %}"></script>
<script src="{% static 'js/member_detail.js' %}"></script>
{% endblock %}