{% extends "home.html" %}
{% load static %}

{% block main_content %}
<link rel="stylesheet" href="{% static 'css/all_instructors.css' %}">
<script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>

<section class="instructors-section">
    <h2>All Instructors</h2>

    <div class="filter-panel">
        <div class="filter-form">
            <div class="filter-row">
                <div class="filter-group">
                    <label for="yearFilter">Associated Since</label>
                    <select id="yearFilter">
                        <option value="">All Years</option>
                        {% for year in range_years %}
                            <option value="{{ year }}">{{ year }}</option>
                        {% endfor %}
                    </select>
                </div>

                <div class="filter-group">
                    <label for="updeshtaFilter">Updeshta Since</label>
                    <select id="updeshtaFilter">
                        <option value="">All Years</option>
                        {% for year in range_years %}
                            <option value="{{ year }}">{{ year }}</option>
                        {% endfor %}
                    </select>
                </div>

                <div class="filter-group">
                    <label for="ageFilter">Age Range</label>
                    <select id="ageFilter">
                        <option value="">All Ages</option>
                        <option value="20-30">20-30</option>
                        <option value="31-40">31-40</option>
                        <option value="41-50">41-50</option>
                        <option value="51+">51+</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label for="searchInput">Search</label>
                    <input type="text" id="searchInput" placeholder="Name or address...">
                </div>
            </div>

            <div class="filter-actions">
                <button id="downloadExcel" class="filter-btn download-btn">
                    <i class="fas fa-download"></i> Download Excel
                </button>
                <div class="right-actions">
                    <button id="applyFilter" class="filter-btn apply-btn">
                        <i class="fas fa-filter"></i> Apply Filters
                    </button>
                    <button id="resetFilter" class="filter-btn reset-btn">
                        <i class="fas fa-undo"></i> Reset
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="table-container">
        <table id="instructorsTable">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Age</th>
                    <th>Date of Birth</th>
                    <th>Associated Since</th>
                    <th>Updeshta Since</th>
                    <th>Address</th>
                    <th>Members Count</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% if instructors %}
                    {% for instructor in instructors %}
                        <tr>
                            <td>{{ instructor.name|default:"N/A" }}</td>
                            <td>{{ instructor.age|default:"N/A" }}</td>
                            <td>{{ instructor.dop|default:"N/A" }}</td>
                            <td>{{ instructor.associated_since|default:"N/A" }}</td>
                            <td>{{ instructor.updeshta_since|default:"N/A" }}</td>
                            <td>{{ instructor.address|default:"N/A" }}</td>
                            <td>{{ instructor.member_count|default:"0" }}</td>
                            <td class="actions-cell">
                                <button class="action-btn view-btn" data-id="{{ instructor.id }}">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button class="action-btn edit-btn" data-id="{{ instructor.id }}">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="action-btn delete-btn" data-id="{{ instructor.id }}">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </td>
                        </tr>
                    {% endfor %}
                {% else %}
                    <tr>
                        <td colspan="8" class="text-center">No instructors found</td>
                    </tr>
                {% endif %}
            </tbody>
        </table>
    </div>
</section>

<script src="{% static 'js/all_instructors.js' %}"></script>
{% endblock %}