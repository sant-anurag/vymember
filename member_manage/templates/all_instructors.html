{% extends "home.html" %}
{% load static %}

{% block main_content %}
<link rel="stylesheet" href="{% static 'css/all_instructors.css' %}">

<div class="instructors-section">
    <h2>All Instructors</h2>
    <div class="filter-panel">
        <form class="filter-form" id="filterForm" onsubmit="return false;">
            <div class="filter-row">
                <div class="filter-group">
                    <label for="yearFilter">Associated Since (Year)</label>
                    <select id="yearFilter">
                        <option value="">All</option>
                        {% for y in years_range %}
                        <option value="{{ y }}">{{ y }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="filter-group">
                    <label for="updeshtaFilter">Updeshta Since (Year)</label>
                    <select id="updeshtaFilter">
                        <option value="">All</option>
                        {% for y in years_range %}
                        <option value="{{ y }}">{{ y }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="filter-group">
                    <label for="ageFilter">Age</label>
                    <select id="ageFilter">
                        <option value="">All</option>
                        <option value="20-30">20-30</option>
                        <option value="31-40">31-40</option>
                        <option value="41-50">41-50</option>
                        <option value="51+">51+</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="searchInput">Search Name/Address</label>
                    <input type="text" id="searchInput" placeholder="Type to search...">
                </div>
            </div>
            <div class="filter-actions">
                <button type="button" class="filter-btn apply-btn" id="applyFilter">
                    <span>Apply Filters</span>
                </button>
                <div class="right-actions">
                    <button type="button" class="filter-btn reset-btn" id="resetFilter">
                        <span>Reset</span>
                    </button>
                    <button type="button" class="filter-btn download-btn" id="downloadExcel">
                        <span>Download Excel</span>
                    </button>
                </div>
            </div>
        </form>
    </div>
    <div class="table-container">
        <table id="instructorsTable">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Contact No.</th>
                    <th>Age</th>
                    <th>Associated Since</th>
                    <th>Updeshta Since</th>
                    <th>Gender</th>
                    <th>Address</th>
                    <th>City</th>
                    <th>State</th>
                    <th>Country</th>
                    <th>Status</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% if instructors %}
                    {% for instructor in instructors %}
                    <tr>
                        <td>{{ instructor.name }}</td>
                        <td>{{ instructor.number|default:"-" }}</td>
                        <td>{{ instructor.age|default:"-" }}</td>
                        <td>{{ instructor.associated_since|default:"-" }}</td>
                        <td>{{ instructor.updeshta_since|default:"-" }}</td>
                        <td>{{ instructor.gender|default:"-" }}</td>
                        <td>{{ instructor.address|default:"-" }}</td>
                        <td>{{ instructor.district|default:"-" }}</td>
                        <td>{{ instructor.state|default:"-" }}</td>
                        <td>{{ instructor.country|default:"-" }}</td>
                        <td>
                            {% if instructor.is_active %}
                                <span style="color: #28a745; font-weight: 600;">Active</span>
                            {% else %}
                                <span style="color: #e74c3c; font-weight: 600;">Inactive</span>
                            {% endif %}
                        </td>
                        <td class="actions-cell">
                            <button class="action-btn view-btn" data-id="{{ instructor.id }}" title="View">
                                <i class="fa fa-eye"></i>
                            </button>
                            <button class="action-btn edit-btn" data-id="{{ instructor.id }}" title="Edit">
                                <i class="fa fa-edit"></i>
                            </button>

                        </td>
                    </tr>
                    {% endfor %}
                {% else %}
                    <tr>
                        <td colspan="8" class="text-center">No instructors found</td>
                    </tr>
                {% endif %}
            </tbody>
        </table>
    </div>
</div>

<!-- Modal Overlay for View/Edit Instructor -->
<div class="modal-overlay" id="instructorModal" style="display: none;">
    <div class="modal-content">
        <button class="modal-close-btn" id="modalCloseBtn" title="Close">&times;</button>
        <h2 id="modalTitle">Instructor Details</h2>
        <form id="instructorForm">
            <div class="modal-grid">
                <div>
                    <label for="modalName">Name</label>
                    <input type="text" id="modalName" name="name" required>
                </div>
                <div>
                    <label for="modalNumber">Contact Number</label>
                    <input type="text" id="modalNumber" name="number" required>
                </div>
                <div>
                    <label for="modalAge">Age</label>
                    <input type="number" id="modalAge" name="age" min="0">
                </div>
                <div>
                    <label for="modalAssociated">Associated Since</label>
                    <input type="number" id="modalAssociated" name="associated_since" >
                </div>
                <div>
                    <label for="modalUpdeshta">Updeshta Since</label>
                    <input type="number" id="modalUpdeshta" name="updeshta_since">
                </div>
                <div>
                    <label for="modelGender">Gender</label>
                    <input type="text" id="modelGender" name="modelGender">
                </div>
                <div>
                    <label for="modalAddress">Address</label>
                    <input type="text" id="modalAddress" name="modalAddress">
                </div>
                <div>
                   <label for="modalCountry">Country</label>
                    <select name="modalCountry" id="modalCountry" required>
                        <option value="">Select Country</option>
                    </select>
                </div>
                <div>
                   <label for="modalState">State</label>
                    <input type="text" id="modalState" name="modalState">
                </div>
                <div>
                   <label for="modalCity">City</label>
                    <input type="text" id="modalCity" name="modalCity">
                </div>
                <div>
                    <label for="modalActive">Status</label>
                    <select id="modalActive" name="is_active">
                        <option value="1">Active</option>
                        <option value="0">Inactive</option>
                    </select>
                </div>
            </div>
            <div class="modal-actions">
                <button type="button" class="modal-btn cancel-btn" id="modalCancelBtn" onclick="closeInstructorModal()">Cancel</button>
                <button type="submit" class="modal-btn save-btn" id="modalSaveBtn">Save</button>
            </div>
        </form>
    </div>
</div>
<!-- New Edit Modal -->
<div class="modal-overlay" id="editInstructorModal" style="display: none;">
    <div class="modal-content">
        <button class="modal-close-btn" id="editModalCloseBtn" title="Close">&times;</button>
        <h2 id="editModalTitle">Edit Instructor</h2>
        <form id="editInstructorForm">
            <div class="modal-grid">
                <div>
                    <label for="editModalName">Name</label>
                    <input type="text" id="editModalName" name="name" required>
                </div>
                <div>
                    <label for="editModalAge">Age</label>
                    <input type="number" id="editModalAge" name="age" min="0">
                </div>
                <div>
                    <label for="editModalNumber">Contact Number</label>
                    <input type="text" id="editModalNumber" name="number" min="0">
                </div>
                <div>
                    <label for="editModalAssociated">Associated Since</label>
                    <input type="number" id="editModalAssociated" name="associated_since">
                </div>
                <div>
                    <label for="editModalUpdeshta">Updeshta Since</label>
                    <input type="number" id="editModalUpdeshta" name="updeshta_since">
                </div>
                <div>
                    <label for="editModalGender">Gender</label>
                    <input type="text" id="editModalGender" name="gender">
                </div>
                <div>
                    <label for="editModalAddress">Address</label>
                    <input type="text" id="editModalAddress" name="address">
                </div>
                <div>
                    <label for="editModalCountry">Country</label>
                    <select id="editModalCountry" name="country" required>
                        <option value="">Select Country</option>
                    </select>
                </div>
                <div>
                    <label for="editModalState">State</label>
                    <select id="editModalState" name="state" required>
                        <option value="">Select State</option>
                    </select>
                </div>
                <div>
                    <label for="editModalCity">City</label>
                    <select id="editModalCity" name="district" required>
                        <option value="">Select City</option>
                    </select>
                </div>
                <div>
                    <label for="editModalActive">Status</label>
                    <select id="editModalActive" name="is_active">
                        <option value="1">Active</option>
                        <option value="0">Inactive</option>
                    </select>
                </div>
            </div>
            <div class="modal-actions">
                <button type="button" class="modal-btn cancel-btn" id="editModalCancelBtn">Cancel</button>
                <button type="submit" class="modal-btn save-btn" id="editModalSaveBtn">Save</button>
            </div>
        </form>
    </div>
</div>
<script src="https://kit.fontawesome.com/2b8e1e2e2a.js" crossorigin="anonymous"></script>
<script src="{% static 'js/all_instructors.js' %}"></script>
<script src="{% static 'js/edit_instructor_modal.js' %}"></script>
{% endblock %}